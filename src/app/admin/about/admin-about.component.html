<div class="about-admin-container">
  <div class="section-header">
    <h2>Editar Sección "Acerca de Nosotros"</h2>
    <button class="btn btn-primary" (click)="guardarContenido()" [disabled]="guardando">
      <i class="fas fa-save"></i>
      {{ guardando ? 'Guardando...' : 'Guardar Cambios' }}
    </button>
  </div>
  
  <div class="card mb-4">
    <div class="card-body">
      <div class="row">
        <!-- Imagen principal y título -->
        <div class="col-md-4">
          <div class="mb-3">
            <label class="form-label">Imagen Principal</label>
            <div class="image-preview-container">
              <img 
                [src]="previewImagenPrincipal || contenido.imagenPrincipal || 'assets/images/placeholder.jpg'" 
                alt="Imagen principal" 
                class="img-fluid rounded main-image-preview"
                (error)="contenido.imagenPrincipal = 'assets/images/placeholder.jpg'">
              
              <div class="image-upload-controls">
                <label for="imagenPrincipal" class="btn btn-sm btn-outline-primary">
                  <i class="fas fa-upload"></i> Cambiar imagen
                </label>
                <input 
                  type="file" 
                  id="imagenPrincipal" 
                  accept="image/*" 
                  class="d-none" 
                  (change)="seleccionarImagenPrincipal($event)">
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-md-8">
          <div class="mb-3">
            <label for="titulo" class="form-label">Título</label>
            <input 
              type="text" 
              id="titulo" 
              class="form-control" 
              [(ngModel)]="contenido.titulo" 
              placeholder="Ej: Acerca de Nosotros">
          </div>
          
          <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción Breve</label>
            <textarea 
              id="descripcion" 
              class="form-control" 
              rows="3" 
              [(ngModel)]="contenido.descripcion" 
              placeholder="Breve descripción para el encabezado..."></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Historia, Misión y Visión -->
  <div class="card mb-4">
    <div class="card-header">
      <h5 class="mb-0">Historia, Misión y Visión</h5>
    </div>
    <div class="card-body">
      <div class="mb-3">
        <label for="historia" class="form-label">Nuestra Historia</label>
        <textarea 
          id="historia" 
          class="form-control" 
          rows="5" 
          [(ngModel)]="contenido.historia" 
          placeholder="Cuéntanos sobre la historia de la librería..."></textarea>
      </div>
      
      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="mision" class="form-label">Misión</label>
            <textarea 
              id="mision" 
              class="form-control" 
              rows="3" 
              [(ngModel)]="contenido.mision" 
              placeholder="La misión de nuestra librería..."></textarea>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="mb-3">
            <label for="vision" class="form-label">Visión</label>
            <textarea 
              id="vision" 
              class="form-control" 
              rows="3" 
              [(ngModel)]="contenido.vision" 
              placeholder="Nuestra visión para el futuro..."></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Sección de Equipo -->
  <div class="card mb-4">
    <div class="card-header">
      <h5 class="mb-0">Nuestro Equipo</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-4" *ngFor="let foto of contenido.equipoFotos; let i = index">
          <div class="team-member-card">
            <div class="image-preview-container mb-3">
              <img 
                [src]="previewEquipoImagenes[i] || foto || 'assets/images/placeholder-user.jpg'" 
                alt="Miembro del equipo" 
                class="img-fluid rounded team-image-preview"
                (error)="contenido.equipoFotos![i] = 'assets/images/placeholder-user.jpg'">
              
              <div class="image-upload-controls">
                <label [for]="'equipoFoto' + i" class="btn btn-sm btn-outline-primary">
                  <i class="fas fa-upload"></i> Cambiar foto
                </label>
                <input 
                  type="file" 
                  [id]="'equipoFoto' + i" 
                  accept="image/*" 
                  class="d-none" 
                  (change)="seleccionarImagenEquipo($event, i)">
              </div>
            </div>
            
            <div class="mb-3">
              <label [for]="'equipoNombre' + i" class="form-label">Nombre</label>
              <input 
                type="text" 
                [id]="'equipoNombre' + i" 
                class="form-control" 
                [(ngModel)]="contenido.equipoNombres![i]" 
                placeholder="Nombre del miembro">
            </div>
            
            <div class="mb-3">
              <label [for]="'equipoCargo' + i" class="form-label">Cargo</label>
              <input 
                type="text" 
                [id]="'equipoCargo' + i" 
                class="form-control" 
                [(ngModel)]="contenido.equipoCargos![i]" 
                placeholder="Cargo o posición">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Vista previa -->
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Vista Previa</h5>
    <button class="btn btn-outline-secondary btn-sm" (click)="abrirPaginaCompleta()">
      <i class="fas fa-external-link-alt"></i> Ver página completa
    </button>
    </div>
    <div class="card-body">
      <div class="about-preview">
        <h1 class="preview-title">{{contenido.titulo}}</h1>
        <p class="preview-description">{{contenido.descripcion}}</p>
        
        <div class="preview-image-container">
          <img 
            [src]="previewImagenPrincipal || contenido.imagenPrincipal || 'assets/images/placeholder.jpg'" 
            alt="Imagen principal" 
            class="preview-image">
        </div>
        
        <div class="preview-section">
          <h2>Nuestra Historia</h2>
          <p>{{contenido.historia}}</p>
        </div>
        
        <div class="preview-columns">
          <div class="preview-column">
            <h3>Misión</h3>
            <p>{{contenido.mision}}</p>
          </div>
          
          <div class="preview-column">
            <h3>Visión</h3>
            <p>{{contenido.vision}}</p>
          </div>
        </div>
        
        <div class="preview-team">
          <h2>Nuestro Equipo</h2>
          <div class="preview-team-grid">
            <div class="preview-team-member" *ngFor="let foto of contenido.equipoFotos; let i = index">
              <div class="preview-team-photo">
                <img 
                  [src]="previewEquipoImagenes[i] || foto || 'assets/images/placeholder-user.jpg'" 
                  [alt]="contenido.equipoNombres![i] || 'Miembro del equipo'">
              </div>
              <h4>{{contenido.equipoNombres![i] || 'Nombre'}}</h4>
              <p>{{contenido.equipoCargos![i] || 'Cargo'}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
